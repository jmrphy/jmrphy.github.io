<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: social science | Justin Murphy]]></title>
  <link href="http://jmrphy.github.io/blog/categories/social-science/atom.xml" rel="self"/>
  <link href="http://jmrphy.github.io/"/>
  <updated>2013-08-09T01:41:54-04:00</updated>
  <id>http://jmrphy.github.io/</id>
  <author>
    <name><![CDATA[Justin Murphy]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Civil War and the Square of Ethnic Fractionalization]]></title>
    <link href="http://jmrphy.github.io/blog/2013/05/22/civil-war-and-the-square-of-ethnic-fractionalization-4/"/>
    <updated>2013-05-22T12:06:22-04:00</updated>
    <id>http://jmrphy.github.io/blog/2013/05/22/civil-war-and-the-square-of-ethnic-fractionalization-4</id>
    <content type="html"><![CDATA[<p>Steve Saideman wonders if the relationship between ethnic fractionalization and civil war is curvilinear, where increasing fractionalization increases the probability of civil war up to a certain point but then increasing fractionalization decreases the probability of civil war. Since I have my nose in this data right now, I&rsquo;ve given this conjecture a quick probe. I find no evidence <em>prima facie</em>.</p>

<p>Below is a replication of Sambanis 2004 where I simply add the square of ethnic fractionalization. If Steve&rsquo;s conjecture were true, we&rsquo;d expect <em>ef1</em> to be positive, <em>ef1sq</em> to be negative, and both of them to be significant. They are signed as expected but not significant given the controls recommended by Sambanis. I then try alternative codings of civil war and a simple equation with no controls. If Steve&rsquo;s conjecture is true, it&rsquo;s not obvious.</p>

<p>Everything below is reproducible in R-just download the replication data, easy to find with a quick search, and set your working directory to where the data is.</p>

<h2>Data</h2>

<p>``` r Get data and create the squared variable</p>

<p>library(foreign)
sambanis &lt;&ndash; read.dta(&ldquo;SambanisJCR2004_replicationdataset.dta&rdquo;)
sambanis$ef1sq &lt;&ndash; sambanis$ef1 * sambanis$ef1</p>

<p>```</p>

<p>``` r Replicate Sambanis 2004 (Table 6 in paper, column 8, pp.845)</p>

<p>model &lt;&ndash; glm(warstnsb ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + ef1 + lpopnsl1 +</p>

<pre><code>    mtnl1 + warnsl1, data = sambanis, family = binomial(link = "probit"))
</code></pre>

<p>summary(model)</p>

<p>```</p>

<pre><code>## Call:
## glm(formula = warstnsb ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + 
##     oil2l1 + ef1 + lpopnsl1 + mtnl1 + warnsl1, family = binomial(link = "probit"), 
##     data = sambanis)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -0.604  -0.231  -0.173  -0.106   3.560  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.90226    0.46234   -8.44  &lt; 2e-16 ***
## gdpl1       -0.09271    0.02295   -4.04  5.3e-05 ***
## grol1       -0.51380    0.49750   -1.03  0.30172    
## inst3l1      0.23713    0.09634    2.46  0.01384 *  
## anoc2l1      0.23792    0.08807    2.70  0.00690 ** 
## oil2l1       0.29680    0.11541    2.57  0.01012 *  
## ef1          0.35605    0.16455    2.16  0.03049 *  
## lpopnsl1     0.10503    0.02743    3.83  0.00013 ***
## mtnl1        0.00199    0.00182    1.09  0.27466    
## warnsl1     -0.06609    0.10492   -0.63  0.52873    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 1133.2  on 5892  degrees of freedom
## Residual deviance: 1038.8  on 5883  degrees of freedom
##   (3567 observations deleted due to missingness)
## AIC: 1059
## 
## Number of Fisher Scoring iterations: 8
</code></pre>

<h2>Adding the square of ethnic fractionalization</h2>

<p>``` r Adding the square of ethnic fractionalization</p>

<p>model &lt;&ndash; glm(warstnsb ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + ef1 + ef1sq +</p>

<pre><code>    lpopnsl1 + mtnl1 + muslim + warnsl1, data = sambanis, family = binomial(link =          "probit"))
</code></pre>

<p>summary(model)</p>

<p>```</p>

<pre><code>## Call:
## glm(formula = warstnsb ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + 
##     oil2l1 + ef1 + ef1sq + lpopnsl1 + mtnl1 + muslim + warnsl1, 
##     family = binomial(link = "probit"), data = sambanis)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -0.595  -0.230  -0.172  -0.103   3.547  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.94606    0.48647   -8.11    5e-16 ***
## gdpl1       -0.09092    0.02370   -3.84  0.00012 ***
## grol1       -0.50874    0.49343   -1.03  0.30253    
## inst3l1      0.23723    0.09641    2.46  0.01386 *  
## anoc2l1      0.24253    0.08838    2.74  0.00607 ** 
## oil2l1       0.26000    0.12119    2.15  0.03192 *  
## ef1          0.51893    0.72622    0.71  0.47488    
## ef1sq       -0.17995    0.71442   -0.25  0.80113    
## lpopnsl1     0.10452    0.02775    3.77  0.00017 ***
## mtnl1        0.00184    0.00188    0.98  0.32529    
## muslim       0.00104    0.00111    0.93  0.35169    
## warnsl1     -0.06888    0.10501   -0.66  0.51185    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 1133.2  on 5892  degrees of freedom
## Residual deviance: 1037.8  on 5881  degrees of freedom
##   (3567 observations deleted due to missingness)
## AIC: 1062
## 
## Number of Fisher Scoring iterations: 8
</code></pre>

<p>``` r Using Sambanis alternative coding of civil war</p>

<p>model &lt;&ndash; glm(warstns ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + ef1 + ef1sq +</p>

<pre><code>    lpopnsl1 + mtnl1 + muslim + warnsl1, data = sambanis, family = binomial(link = "probit"))
</code></pre>

<p>summary(model)</p>

<p>```</p>

<pre><code>## Call:
## glm(formula = warstns ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + 
##     ef1 + ef1sq + lpopnsl1 + mtnl1 + muslim + warnsl1, family = binomial(link = "probit"), 
##     data = sambanis)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -0.532  -0.217  -0.165  -0.102   3.499  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.73245    0.52338   -7.13  9.9e-13 ***
## gdpl1       -0.08649    0.02469   -3.50  0.00046 ***
## grol1       -0.09783    0.48861   -0.20  0.84131    
## inst3l1      0.23635    0.10911    2.17  0.03030 *  
## anoc2l1      0.28191    0.09773    2.88  0.00392 ** 
## oil2l1       0.16875    0.14066    1.20  0.23027    
## ef1          0.65104    0.77115    0.84  0.39853    
## ef1sq       -0.38362    0.77341   -0.50  0.61989    
## lpopnsl1     0.08969    0.03039    2.95  0.00316 ** 
## mtnl1        0.00209    0.00205    1.02  0.30854    
## muslim       0.00118    0.00124    0.95  0.34246    
## warnsl1     -0.21649    0.31589   -0.69  0.49313    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 915.34  on 5161  degrees of freedom
## Residual deviance: 842.13  on 5150  degrees of freedom
##   (4298 observations deleted due to missingness)
## AIC: 866.1
## 
## Number of Fisher Scoring iterations: 8
</code></pre>

<h2>Using Fearon and Laitin 2003 coding of civil war</h2>

<p>``` r Using Fearon and Laitin 2003 coding of civil war</p>

<p>model &lt;&ndash; glm(warst7b ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + ef1 + ef1sq +</p>

<pre><code>    lpopnsl1 + mtnl1 + muslim + warnsl1, data = sambanis, family = binomial(link = "probit"))
</code></pre>

<p>summary(model)</p>

<p>```</p>

<pre><code>## Call:
## glm(formula = warst7b ~ gdpl1 + grol1 + inst3l1 + anoc2l1 + oil2l1 + 
##     ef1 + ef1sq + lpopnsl1 + mtnl1 + muslim + warnsl1, family = binomial(link = "probit"), 
##     data = sambanis)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -0.501  -0.200  -0.145  -0.086   3.590  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -4.28989    0.54194   -7.92  2.5e-15 ***
## gdpl1       -0.08807    0.02665   -3.30  0.00095 ***
## grol1       -0.27141    0.52732   -0.51  0.60677    
## inst3l1      0.19536    0.10692    1.83  0.06768 .  
## anoc2l1      0.25845    0.09748    2.65  0.00802 ** 
## oil2l1       0.13327    0.14174    0.94  0.34707    
## ef1          0.44027    0.80427    0.55  0.58409    
## ef1sq       -0.22642    0.79784   -0.28  0.77657    
## lpopnsl1     0.11930    0.03065    3.89  9.9e-05 ***
## mtnl1        0.00255    0.00204    1.25  0.21124    
## muslim       0.00155    0.00122    1.26  0.20659    
## warnsl1      0.01688    0.11169    0.15  0.87987    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 897.81  on 5892  degrees of freedom
## Residual deviance: 822.48  on 5881  degrees of freedom
##   (3567 observations deleted due to missingness)
## AIC: 846.5
## 
## Number of Fisher Scoring iterations: 9
</code></pre>

<h2>Only ethnic fractionalization</h2>

<p>``` r Only ethnic fractionalization</p>

<p>model &lt;&ndash; glm(warstnsb ~ ef1 + ef1sq, data = sambanis, family = binomial(link = &ldquo;probit&rdquo;))
summary(model)</p>

<p>```</p>

<pre><code>## Call:
## glm(formula = warstnsb ~ ef1 + ef1sq, family = binomial(link = "probit"), 
##     data = sambanis)
## 
## Deviance Residuals: 
##    Min      1Q  Median      3Q     Max  
## -0.303  -0.227  -0.196  -0.161   2.990  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   -2.302      0.131  -17.63   &lt;2e-16 ***
## ef1            0.323      0.589    0.55     0.58    
## ef1sq          0.283      0.580    0.49     0.63    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 1249.6  on 6268  degrees of freedom
## Residual deviance: 1230.5  on 6266  degrees of freedom
##   (3191 observations deleted due to missingness)
## AIC: 1237
## 
## Number of Fisher Scoring iterations: 7
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Analysis of #GazaUnderAttack Tweets]]></title>
    <link href="http://jmrphy.github.io/blog/2012/12/29/analysis-of-gazaunderattack-tweets/"/>
    <updated>2012-12-29T14:12:32-05:00</updated>
    <id>http://jmrphy.github.io/blog/2012/12/29/analysis-of-gazaunderattack-tweets</id>
    <content type="html"><![CDATA[<p>During the Israeli-Palestinian attacks of last month, I scraped from the Twitter API about 270,000 tweets containing the hashtag #gazaunderattack. Given the unprecedented degree to which this war was fought online, tweets of this sort could and should become really important data for political scientists. I&rsquo;m too busy right now to say very much here, but I want to share some basic descriptive analyses for anyone who might be interested. The dataset can be downloaded <a href="https://dl.dropbox.com/u/20498362/tweets_%23gazaunderattack.csv">here</a> and the R script that produced these analyses is available at the very bottom.</p>

<p>Almost everything in this post I learned how to do directly and solely from the amazingly smart, open and generous #Rstats community. The scraping and time-series plot follow a script by <a href="http://bommaritollc.com/2011/02/26/archiving-tweets-with-python/">Michael Bommarito</a>, and the rest follows scripts by <a href="https://github.com/benmarwick/AAA2011-Tweets/blob/master/AAA2011.R">Ben Marwick</a>.</p>

<h2>Analysis</h2>

<p>There are 269,158 tweets. These tweets are authored by 79,923 unique users. Of all the tweets, .62 are retweets.</p>

<p>This first graph plots the frequency of #gazaunderattack tweets in 30-minute intervals between November 17th and November 21st. I <em>believe__ </em>this is <em>all</em> of the tweets containing that hashtag within this period. I know the Twitter Search API is subject to weird filters and restrictions, but I believe the technique I used here pages through each and every tweet available within the available time period.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/12/timeseries.png"><img src="http://justinmurphy.files.wordpress.com/2012/12/timeseries.png" alt="timeseries" /></a></p>

<p>Most frequent #gazaunderattack tweeters.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/12/tweet_counts.png"><img src="http://justinmurphy.files.wordpress.com/2012/12/tweet_counts.png" alt="tweet_counts" /></a></p>

<p>The most retweeted tweeters. Interestingly, Anonymous seems to have had more reach, at least during this period, than the twitter account of Hamas (@AlqassamBrigade).</p>

<p><em><a href="http://justinmurphy.files.wordpress.com/2012/12/retweet_counts.png"><img src="http://justinmurphy.files.wordpress.com/2012/12/retweet_counts.png" alt="retweet_counts" /></a></em>The most retweeted tweeters as a ratio of total quantity of tweets sent.   Anonymous still seems to have had the most reach on the #gazaunderattack hashtag.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/12/retweet_ratios.png"><img src="http://justinmurphy.files.wordpress.com/2012/12/retweet_ratios.png" alt="retweet_ratios" /></a></p>

<p>Most frequently tweeted links.<a href="http://justinmurphy.files.wordpress.com/2012/12/links.png"><img src="http://justinmurphy.files.wordpress.com/2012/12/links.png" alt="links" /></a></p>

<p><a href="http://d3j5vwomefv46c.cloudfront.net/photos/large/688740234.jpg?key=964633&amp;Expires=1356766099&amp;Key-Pair-Id=APKAIYVGSUJFNRFZBBTA&amp;Signature=05VhXXvHpkOc2wqjLXrGMgNasVet~TM9zp9UELk3vd0aCJcGb6uJI4Uv4FEk5LNEQQSGWrUrV9mNKpp5STIrUEwFufBGCwcboTeLJfg55DA75JoXHkMdmedD5P6M2~EOYUbtqSOBFGY7VQgzfN-~UhU6lLSwV3grA4~ZrZDTIlI_">This is the image</a> in the most popular link, capturing an explosion from an Israeli airstrike in Gaza.</p>

<p>Again, the Python code I used to obtain the tweets and the R code I used to analyze them were lifted directly from scripts by the authors linked above.</p>

<p>``` r</p>

<p>x&lt;-read.csv(&ldquo;tweets_#gazaunderattack.csv&rdquo;, header=FALSE, stringsAsFactors=FALSE)
x$username&lt;-x$V2
x$text&lt;-x$V5</p>

<h6>#</h6>

<h4>Nice Time-Series Plot</h4>

<h6>#</h6>

<p>library(ggplot2)
x$date &lt;&ndash; strptime(x$V4, &ldquo;%a, %d %b %Y %H:%M:%S %z&rdquo;, tz = &ldquo;EST&rdquo;)
x$date &lt;&ndash; as.POSIXct(x$date, tz = &ldquo;EST&rdquo;)
timeseries&lt;-ggplot(data=x, aes(x=date)) + geom_bar(aes(fill=..count..), binwidth=60*30) + theme_bw() + ylab(&ldquo;# of Tweets&rdquo;) + xlab(&ldquo;Time&rdquo;)
timeseries
ggsave(file=&ldquo;timeseries.png&rdquo;)</p>

<h6>#</h6>

<h4>Nice Plot of Frequent Tweeters</h4>

<h6>#</h6>

<p>library(ggplot2)
x$username[x$username==&ldquo;&rdquo;]&lt;-NA
length(unique(x$username)) # see how many unique tweeter accounts in the sample
counts=table(x$username)
counts.sort&lt;-sort(counts)
counts.sort.subset=subset(counts.sort, counts.sort>350) # create a subset of those who tweeted at least 350 times or more
counts.sort.subset.df&lt;-data.frame(people=unlist(dimnames(counts.sort.subset)),count=unlist(counts.sort.subset)) # makes a funny sort of data frame&hellip;
counts.sort.subset.df&lt;-data.frame(people=as.factor(counts.sort.subset.df$people),counts=as.numeric(counts.sort.subset.df$count)) # makes a better data frame for ggplot to work with
ggplot(counts.sort.subset.df, aes(reorder(people,counts),counts)) + xlab(&ldquo;Author&rdquo;) + ylab(&ldquo;Number of messages&rdquo;)+ geom_bar() + coord_flip() + theme_bw() + opts(axis.title.x = theme_text(vjust = -0.5, size = 14)) + opts(axis.title.y=theme_text(size = 14, angle=90)) # plot nicely ordered counts of tweets by person for people > 5 tggsave(file = &ldquo;tweet_counts.pdf&rdquo;) # export the plot to a PDF file
ggsave(file = &ldquo;tweet_counts.png&rdquo;)</p>

<h6>#</h6>

<h4>Nice Plot of Frequent Re-Tweeters</h4>

<h6>#</h6>

<p>library(stringr)
x$text=sapply(x$text,function(row) iconv(row,to=&lsquo;UTF-8&rsquo;)) #remove odd characters
trim &lt;&ndash; function (x) sub(&lsquo;@&rsquo;,&lsquo;&rsquo;,x) # remove @ symbol from user names
x$rt=sapply(x$text,function(tweet) trim(str_match(tweet,&ldquo;^RT (@[[:alnum:]_]*)&rdquo;)[2])) #extract who has been RT’d
sum(!is.na(x$rt)) # see how many tweets are retweets
sum(!is.na(x$rt))/length(x$rt) # the ratio of retweets to tweets
countRT&lt;-table(x$rt)
countRT&lt;-sort(countRT)
countRT.subset=subset(countRT,countRT>1000) # subset those RT’d more than 1000 times
countRT.subset.df&lt;-data.frame(people=as.factor(unlist(dimnames(countRT.subset))),RT_count=as.numeric(unlist(countRT.subset)))
ggplot(countRT.subset.df, aes(reorder(people,RT_count),RT_count)) +
 xlab(&ldquo;Author&rdquo;) + ylab(&ldquo;Number of messages retweeted by others&rdquo;) +
 geom_bar() + coord_flip() + theme_bw() +
 opts(axis.title.x = theme_text(vjust = -0.5, size = 14)) +
 opts(axis.title.y=theme_text(size = 14, angle=90))
 # plot nicely ordered counts of tweets by person for people > 1000 retweets
ggsave(file = &ldquo;retweet_counts.png&rdquo;)</p>

<h6>#</h6>

<h4>Nice Plot of RT-Tweet Ratios</h4>

<h6>#</h6>

<p>t&lt;-as.data.frame(table(x$username)) # make table with counts of tweets per person
rt&lt;-as.data.frame(table(x$rt)) # make table with counts of retweets per person
t.rt&lt;-merge(t,rt,by=&ldquo;Var1&rdquo;) # combine tweet count and retweet count per person
t.rt[&ldquo;ratio&rdquo;]&lt;-t.rt$Freq.y / t.rt$Freq.x # creates new col and adds ratio tweet/retweet
sort.t.rt&lt;-t.rt[order(t.rt$ratio),] # sort it to put names in order by ratio
sort.t.rt.subset&lt;-subset(sort.t.rt,sort.t.rt$Freq.y>1000) # exclude those with 1000 tweets or less
sort.t.rt.subset.drop&lt;-droplevels(sort.t.rt.subset) # drop unused levels that got in there somehow&hellip; note that this is already a data frame
ggplot(sort.t.rt.subset, aes(reorder(Var1,ratio),ratio)) +
 xlab(&ldquo;Author&rdquo;) + ylab(&ldquo;Retweets as a ratio of total tweets&rdquo;) +
 geom_bar() + coord_flip() + theme_bw() +
 opts(axis.title.x = theme_text(vjust = -0.5, size = 14)) +
 opts(axis.title.y=theme_text(size = 14, angle=90))
ggsave(file = &ldquo;retweet_ratios.png&rdquo;)</p>

<h6>#</h6>

<h4>Nice Plot of Most Popular Links</h4>

<h6>#</h6>

<p>x$link=sapply(x$text,function(tweet) str_extract(tweet,(&ldquo;http[[:print:]]+&rdquo;))) # creates new field and extracts the links contained in the tweet
x$link=sapply(x$text,function(tweet) str_extract(tweet,&ldquo;http[[:print:]]{16}&rdquo;)) # limits to just 16 characters after http so I just get the shortened link. They are all shortened, so this is fine, but there might be a better way using regex.
countlink&lt;-table(x$link) # get frequencies of each link
countlink&lt;-sort(countlink) # sort them
barplot(countlink) # plot freqs</p>

<h1>or to use ggplot2, read on&hellip;</h1>

<p>countlink&lt;-data.frame(table(na.omit((x$link))))
countlink&lt;-subset(countlink,countlink$Freq>300) # exclude those with 300 tweets or less
ggplot(countlink, aes(reorder(Var1, Freq), Freq)) +
 geom_bar() + coord_flip() + theme_bw() +
 xlab(&ldquo;Link&rdquo;) + ylab(&ldquo;Frequency&rdquo;) +
 opts(axis.title.x = theme_text(vjust = -0.5, size = 14)) +
 opts(axis.title.y=theme_text(size = 14, angle=90))
ggsave(file = &ldquo;links.png&rdquo;)</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Predicting Turnout from Google Search Data]]></title>
    <link href="http://jmrphy.github.io/blog/2012/10/27/predicting-turnout-from-google-search-data/"/>
    <updated>2012-10-27T17:58:43-04:00</updated>
    <id>http://jmrphy.github.io/blog/2012/10/27/predicting-turnout-from-google-search-data</id>
    <content type="html"><![CDATA[<p>Political scientists <a href="http://themonkeycage.org/blog/2012/10/25/will-2012-be-a-low-turnout-election-some-evidence-from-google-search-activity/#comments">Jesse Richman</a> and <a href="http://themonkeycage.org/blog/2012/10/25/google-searches-and-turnout-a-cautionary-tale/">Erik Voeten</a> wonder if Google Search data can help us predict turnout in next month&rsquo;s Presidential election. To summarize, Richman finds that searches for &ldquo;vote&rdquo; in the past two elections predict voter turnout, and that low search volume for &ldquo;vote&rdquo; this year suggests a low turnout election. In response, Voeten shows that controlling for who has come online since 2004 and 2008 explains much of why search volume for &ldquo;vote&rdquo; appears small this year. There are lots of reasons search data is pretty tricky for making good inferences, but that shouldn&rsquo;t keep us from trying!</p>

<p>My thinking is that we can look at the <em>composition</em> of &ldquo;vote&rdquo; searches across elections to see whether this year&rsquo;s vote searches are indicative of greater voter turnout or greater voter demobilization/skepticism.</p>

<p>For instance, &ldquo;vote&rdquo; searches containing the terms &ldquo;where&rdquo; or &ldquo;when&rdquo; are probably more directly predictive of turning out to vote than the whole set of &ldquo;vote&rdquo; searches&mdash;as they indicate practical planning to turnout. On the other hand, &ldquo;vote&rdquo; searches containing the term &ldquo;why&rdquo; are probably far less predictive of turnout&mdash;and might even predict how many people are thinking &ldquo;why bother?&rdquo; and are considering staying home on election day.</p>

<p>So I went back to the data with this in mind. As baseline and as Voeten shows, if we consider voting searches (&ldquo;vote&rdquo; and &ldquo;voting&rdquo; together) as a proportion of searches for &ldquo;university&rdquo;, &ldquo;science&rdquo;, and &ldquo;law&rdquo;, this election hardly looks very different. So that&rsquo;s just (vote+voting) / ((university+science+law) / 3). As explained in the posts linked above, search volume data is scaled from 0 to 100 where 100 is the peak of that search term in the given time period, relative to all other search activity.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/10/votingsearches2.png"><img src="http://justinmurphy.files.wordpress.com/2012/10/votingsearches2.png" alt="" /></a>And when we look at voting searches also containing the word &ldquo;why&rdquo; (as a proportion of the university-science-law index), again we find almost no difference.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/10/whyvotesearches.png"><img src="http://justinmurphy.files.wordpress.com/2012/10/whyvotesearches.png" alt="" /></a>But when we look at voting searches also containing the words &ldquo;where&rdquo; and &ldquo;when&rdquo; (I take the average of vote+where and vote+when as a proportion of the university-science-law index), more people appear to be asking where and when to vote this year than in the past two Presidential elections. The p-value on the difference of means between 2008 and 2012 is .051.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/10/votingplansearches.png"><img src="http://justinmurphy.files.wordpress.com/2012/10/votingplansearches.png" alt="" /></a>Finally, I look at the difference between the why-vote searches and the where/when-vote searches. The gap might be taken as an aggregate measure of how much society is using the web to <em>think about</em> the decision to turn out <em>without planning</em> to turnout, so that positive values might capture demobilization within vote searches (why bother?) and negative values reflect relatively resolved mobilization. And what we find is that this whole election year shows greater &ldquo;when/where&rdquo; vote searches than &ldquo;why&rdquo; vote searches at the present moment in the timeline but also for the year as a whole. In both of the previous elections there were more &ldquo;thinking&rdquo; searches than &ldquo;planning&rdquo; searches, but this year there have been more planning searches. As in the previous analyses, these are as a proportion of the university-science-law index, and the difference of means for 2008 and 2012 is statistically significant at the 99.9% confidence level.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/10/thinkplangapusl.png"><img src="http://justinmurphy.files.wordpress.com/2012/10/thinkplangapusl.png" alt="" /></a>Arguably, this difference variable perhaps already controls for education or political information because each term reflects a lack of knowledge, so it shouldn&rsquo;t be inflated by less educated/informed people coming online since 2004 and 2008. But the same pattern is evident and statistically significant if we look at this gap as a proportion of all &ldquo;politics&rdquo; search volume or just the raw differences of volume. Obviously, these are back-of-the napkin analyses and these data are plagued by difficulties. But these analyses don&rsquo;t suggest a low-turnout election in 2012. If anything, it looks like the web is registering more vote planning than in previous years.</p>

<p><a href="https://dl.dropbox.com/u/20498362/GoogleTrendsVoting.csv">Here is the data in .csv form</a>. Here is the <a href="https://dl.dropbox.com/u/20498362/GoogleTrendsTurnout.R">R script</a> to reproduce the analyses found here.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Do Inflation Expectations Have an Effect on Obama's Re-Election Prospects?]]></title>
    <link href="http://jmrphy.github.io/blog/2012/09/15/do-inflation-expectations-have-an-effect-on-obamas-re-election-prospects/"/>
    <updated>2012-09-15T17:30:35-04:00</updated>
    <id>http://jmrphy.github.io/blog/2012/09/15/do-inflation-expectations-have-an-effect-on-obamas-re-election-prospects</id>
    <content type="html"><![CDATA[<p><a href="http://redonkulusblog.blogspot.com/2012/06/could-fed-save-obama.html">Redonkulus Blog thinks so</a> based on some time-series data. But I was skeptical about this conclusions because I have just enough experience with time series to know that these sorts of inferences are really tricky. After checking out the data, I don&rsquo;t think there is a systematic relationship between inflation expectations and Obama&rsquo;s re-election prospects. For an overview of the measures, just visit the link above&hellip; I only want to share some analyses and review what&rsquo;s methodologically at stake here.</p>

<p>In short, the problem with time-series data is that it&rsquo;s often autocorrelated&mdash;for instance, an observation at time T-1 has a very strong effect on that variable at time T. When regressing a time series on another time series, it&rsquo;s easy to identify statistically significant relationships where no such thing exists if one variable is driving itself while another variable is just going along for the ride over time.</p>

<p>In regression analysis, the easiest way to check against spurious relationships is to analyze the residuals of the model. In particular, a plot of the model residuals against fitted values should be random with no identifiable pattern&mdash;if there are identifiable patterns than the model probably violated assumptions and is no good.</p>

<p>All of the Redonkulus regressions show residuals that suggest problematic models. I&rsquo;ll focus only on the inflation expectations model because that&rsquo;s what piqued some twitter interest heh.</p>

<p>Here are graphs of the model relating inflation expectations to Obama&rsquo;s Intrade scores. We see a pretty systematic pattern in the residuals by fitted values plot, suggesting violations of the OLS assumptions.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/09/inflationresiduals.png"><img src="http://justinmurphy.files.wordpress.com/2012/09/inflationresiduals.png" alt="" /></a>One simple way to deal with this is to transform the time series in a way that filters out the autoregression. One way to do that is to use first differences instead of simple levels. Intuitively, this is perhaps more attractive, anyway: If we think X causes Y, then really we should think that a change in X will be associated with a change in Y&mdash;not just that when one is high the other is high.</p>

<p>Differencing and then re-running the model gives pretty clean, white-noise-ish residuals. But the relationship is not statistically significant.</p>

<p><strong>                                       Estimate    Std. Error    t value    Pr(>|t|)</strong>
(Intercept)                    0.313765      0.164460         1.908      0.0593
D.inflex                         -0.986283   2.377463         -0.415      0.6791
obama$Time[-105]     -0.005026   0.002742        -1.833      0.0698</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/09/diffinflationresiduals1.png"><img src="http://justinmurphy.files.wordpress.com/2012/09/diffinflationresiduals1.png" alt="" /></a>And I basically find the same thing for the other models&mdash;residuals show violation of OLS assumptions; models using first differences are statistically insignificant but the residuals look pretty clean. I even tried lags on the independent variables, thinking maybe changes in inflation expectations might just take a day to show up in Obama&rsquo;s Intrade chances&mdash;but no, nothing. A scatterplot using levels and then a scatterplot using first differences sums this up.</p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/09/inflscatter.png"><img src="http://justinmurphy.files.wordpress.com/2012/09/inflscatter.png" alt="" /></a></p>

<p><a href="http://justinmurphy.files.wordpress.com/2012/09/infldiffscatter.png"><img src="http://justinmurphy.files.wordpress.com/2012/09/infldiffscatter.png" alt="" /></a></p>

<p>In summary, I don&rsquo;t think this data offers evidence that monetary expansion would help Obama&rsquo;s chances of re-election. All of my R code follows, email me or Redonkulous if you want the data file.</p>

<p>[sourcecode language=&ldquo;r&rdquo;]</p>

<p>obama&lt;-read.table(&ldquo;obamasp.csv&rdquo;, sep=&ldquo;,&rdquo;, header=TRUE)
obama$inflex&lt;-ts(obama$inflex)
obama$Obamaclose&lt;-ts(obama$Obamaclose)
obama$Date&lt;-ts(obama$Date)
obama$SPAdjClose&lt;-ts(obama$SPAdjClose)
obama$Time&lt;-ts(obama$Time)
obama$Obamaclose
plot.ts(obama$Obamaclose)</p>

<p>D.Obamaclose&lt;-diff(obama$Obamaclose, differences=1)
D.SPAdjClose&lt;-diff(obama$SPAdjClose, differences=1)
D.inflex&lt;-diff(obama$inflex, differences=1)</p>

<p>library(car)</p>

<p>sp&lt;-lm(obama$Obamaclose ~ obama$SPAdjClose + obama$Time)
summary(sp)
residualPlots(sp)</p>

<p>D.sp&lt;-lm(D.Obamaclose ~ lag(D.SPAdjClose) + obama$Time[-105])
summary(D.sp)
residualPlots(D.sp)</p>

<p>spLDV&lt;-lm(obama$Obamaclose ~ obama$SPAdjClose + obama$Time + lag(obama$Obamaclose))
summary(spLDV)
residualPlots(spLDV)</p>

<p>inf&lt;-lm(obama$Obamaclose ~ obama$inflex + obama$Time)
summary(inf)
residualPlots(inf)</p>

<p>D.inf&lt;-lm(D.Obamaclose ~ D.inflex + obama$Time[-105])
summary(D.inf)
residualPlots(D.inf)</p>

<p>all&lt;-lm(obama$Obamaclose ~ obama$inflex + obama$SPAdjClose + obama$Time)
summary(all)
residualPlots(all)</p>

<p>D.all&lt;-lm(D.Obamaclose ~ D.inflex + D.SPAdjClose + obama$Time[-105])
summary(D.all)
residualPlots(D.all)</p>

<p>scatterplot(obama$Obamaclose ~ obama$inflex)
scatterplot(D.Obamaclose ~ D.inflex)</p>

<p>[/sourcecode]</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Is There Really a School-to-Prison Pipeline?]]></title>
    <link href="http://jmrphy.github.io/blog/2012/06/09/67/"/>
    <updated>2012-06-09T22:00:24-04:00</updated>
    <id>http://jmrphy.github.io/blog/2012/06/09/67</id>
    <content type="html"><![CDATA[<p><strong>1. Can we really say there is a school-to-prison pipeline? And if so, what&rsquo;s &ldquo;pumping&rdquo; it?</strong></p>

<p>The notion of a <a href="http://en.wikipedia.org/wiki/School-to-prison_pipeline">school-to-prison pipeline</a> is increasingly popular in the discourse of a wide coalition of U.S. activists fighting mass incarceration and defending public education. The concept is invoked by groups such as the <a href="http://en.wikipedia.org/wiki/American_Civil_Liberties_Union">American Civil Liberties Union</a>, the Justice Policy Center, and the <a href="http://en.wikipedia.org/wiki/New_York_Civil_Liberties_Union">New York Civil Liberties Union</a> (NYCLU). Here in Pennsylvania, <a href="http://decarceratepa.info/">DecarceratePA</a> and friends in Occupy Philly invoke this image especially in protest of Governor Corbett&rsquo;s budget priorities, arguing that state spending favors the prison system at the cost of public education.</p>

<p>Despite the popularity of this pipeline imagery, it remains only a hypothesis. <a href="http://www.zerotolerancereform.com/wpblog/wp-content/uploads/2010/12/Harvard-Civil-Rights-Project.pdf">Skiba et al. 2003</a> find some evidence that higher school suspension rates are correlated with higher juvenile incarceration rates, but the data is cross-sectional and limited in other ways that preclude confidence in a particular causal story. In a 2009 study, <a href="http://healthpolicy.unm.edu/sites/default/files/documents/Untangling%20the%20School%20Segment%20of%20The%20School-to-Prison%20Pipeline.pdf">Hood and Lopez</a> 2009 find that racial composition of school discipline is not related to the racial composition of juvenile incarceration. In any event, confidence in the argument seems far greater than current research allows, and at worst this could be an erroneous and merely rhetorical hook. Given that the American prison system is probably nothing short of our era&rsquo;s very own<a href="http://www.amazon.com/The-New-Crow-Michelle-Alexander/dp/1595586431/ref=sr_1_1?ie=UTF8&amp;qid=1337506101&amp;sr=8-1"> Jim Crow</a> regime, the school-to-prison pipeline hypothesis is worth analyzing more scrupulously.</p>

<p><strong>2. A simple model: Is rising inequality &ldquo;pumping&rdquo; resources from education to incarceration?</strong></p>

<p>****The question of whether there is a school-to-prison pipeline begs the question of why there would be a school-to-prison pipeline. Lacking is a specifiable political explanation. One possible explanation is that<em> rising income inequality in the United States encourages policymakers to divert funding from education to incarceration</em>. Why? Classic political economy models of redistribution suggest that as income inequality increases, the median voter increasingly prefers higher taxation and public spending. Because elected policymakers aim to satisfy the pivotal median voter, redistribution should be positively associated with inequality. However, it&rsquo;s also well known that many factors often neutralize or reverse the link between inequality and redistribution. For instance, income inequality can enable the rich to simply capture the government. A combination of these two models can explain how there could be a systematic spending dynamic between education and incarceration. As income inequality increases and the rich gain political power relative to the poor, policymakers have much to gain from the rich, and little to lose from the poor, by cutting taxes and social spending. Although the poor face decreasing political power, we might expect that beyond some threshold, where the poor &ldquo;have nothing to lose but their chains,&rdquo; cuts to essential social services would indeed be severely punished&mdash;by, say, revolutionary upheaval. Therefore, as policymakers cut essential social spending, they should also alter the<em> composition</em> of social spending in a way that also pacifies a rising threat of rebellion.</p>

<p>In summary, perhaps rising income inequality (government capture by the rich and the political alienation of the poor) leads policymakers to divert spending from redistributive programs (public education) to programs of outright and coercive pacification (incarceration), not only further excluding the poor from political participation (the formal disenfranchisement of felons) but also literally, forcibly containing the threat of rebellion against the political system itself.</p>

<p><strong>3. Data</strong></p>

<p>****I&rsquo;ve collected time-series data from the United States for the past 60 years to examine whether there is, or has been, some sort of systematic relationship between education and  incarceration. Most of the data is culled from the <a href="http://www.census.gov/compendia/statab/hist_stats.html">Census Bureau historical abstract</a> and usgovernmentspending.com. To extend the Census Bureau historical data past 2001 or so, I do some simple linear interpolations using more up-to-date Census Bureau time series (which go up to 2009 but extend back and overlap the early 2000s cutoff of the historical abstract). In any event, I&rsquo;ve uploaded all of the data to Google Fusion Tables for <a href="https://www.google.com/fusiontables/DataSource?docid=1TsYrSeGBV-mZSvJy0hRRHbUx4aEZoxrZgrymXTI">download</a> lest anyone wants to investigate further. The inequality variable is share of income going to the top 5% percent minus the share of income going to the bottom 5%; education spending per capita is total public spending per capita on elementary, secondary, and tertiary education; the incarceration variable is the number of people incarcerated per 1000 people (interpolated for some years with a slightly different measure, that of the total number under some form of supervision; this is a little awkward but it&rsquo;s a blog post, not a journal article, right?)  The final variables used here are found in the last few columns of the Google Fusion table.</p>

<p>The timespan analyzed here implies a much stronger version of the argument than is popularly articulated: evidence that a school-to-prison pipeline has not existed for several decades would not disprove many more limited versions of the argument. However, evidence of the harder-to-prove, stronger claim of a pipeline dynamic that holds across the past half-century would be even stronger support for today&rsquo;s more limited claims.</p>

<p>[caption id=&ldquo;attachment_74&rdquo; align=&ldquo;alignnone&rdquo; width=&ldquo;600&rdquo;]<a href="http://justinmurphy.wordpress.com/2012/05/26/67/school_prison_inequality-5/"><img src="http://justinmurphy.files.wordpress.com/2012/05/school_prison_inequality2.jpg" alt="" /></a> The first graph illustrates the puzzle of increasing incarceration and decreasing crime. The second graph shows that inequality appears to track incarceration.[/caption]</p>

<ol>
<li><strong>Evidence</strong></li>
</ol>


<p>The concept of a &ldquo;pipeline&rdquo; poses an interesting challenge for how we think about causality and statistical modeling. At a minimum, it seems to imply a negative relationship between two variables, an egress from a source and a flow into a sink, possibly driven by some third quantity representing the pressure or energy pumping the pipeline. There are certainly several ways one could approach modeling such pipeline between education and incarceration, but as a first cut, I test and find some evidence of relationships that together suggest the possibility of something that could reasonably be called a school-to-prison pipeline. The claims are followed by some fairly technical statistical output but with some non-technical notes for interpreting them.</p>

<ol>
<li><strong>Year-to-year increases in the incarceration rate are correlated with year-to-year decreases in education spending per capita</strong>, even after controlling for economic growth (GDP per capita) and any simple, secular trend over time. A common problem from modeling time-series data is that the variable one wants to explain is often so much a function of its previous years' values that it&rsquo;s easy to find spurious relationships with other explanatory variables. So all of the models below include a combination of lagged dependent variables or transformed variables (and pass traditional tests of significant serial correlation in the dependent variable).</li>
</ol>


<p>2. <strong>Year-to year increases in inequality are also correlated with year-to-year decreases in education spending per capita, a</strong><strong>lthough it is not clear if inequality itself correlates with decreases in education spending beyond its correlation with the incarceration rate. </strong>This is because when both inequality and incarceration rates are included in the same model (not displayed), Inequality drops out of statistical significance and Incarceration_Rate remains significant. It&rsquo;s possible that both have independent and separate negative effects on education spending but a full model can&rsquo;t sort out independent effects from two explanatory variables that are themselves highly correlated (high collinearity). Nonetheless, changes in the incarceration rate seem directly correlated with decreases in education spending. Inequality may or may not</p>

<p><img src="http://justinmurphy.files.wordpress.com/2012/05/screen-shot-2012-06-01-at-2-56-29-pm.png" alt="" /></p>

<ol>
<li>If rising inequality is the pump of the pipeline, it would make sense that inequality itself is not directly, independently correlated with education spending. If increases in incarceration are associated with decreases in education, the model sketched above suggests rising inequality might very well explain most directly changes in the incarceration rate.  <strong>Inequality is positively associated with increased incarceration, controlling for the crime rate, previous incarceration rates, and secular trend. </strong>This is true whether or not one looks at levels or year-to-year changes. The interaction of crime and inequality (crime rate multiplied by inequality) also appears to have a systematic relationship to the incarceration rate, suggesting that neither inequality nor crime alone drive incarceration but that perhaps crime is a trigger for incarceration that is conditional on the degree of inequality&mdash;also consistent with the model sketched above.</li>
</ol>


<p><img src="http://justinmurphy.files.wordpress.com/2012/05/screen-shot-2012-06-01-at-2-57-01-pm.png" alt="" /></p>

<ol>
<li>Conservatives might claim that the notion of a school-to-prison pipeline is a misleading interpretation of the culture of poverty, in which the poor are thought to simply opt for crime over educational aspirations, requiring greater incarceration and less spending on education, which in turn leads the rich to get richer compared to an increasingly incarcerated poor. But there&rsquo;s no evidence for these claims: when all these variables are considered in one system of equations (vector autoregression or VAR), effectively allowing each to cause each controlling for the effects of the others, <strong>there remains evidence that inequality drives the incarceration rate and no evidence that crime or incarceration is driving inequality.</strong> It could be that crime and incarceration have an immediate effect on inequality or are highly collinear, and that either of these facts make its effect on inequality statistically indistinguishable&mdash;and for this reason it&rsquo;s no surprise the relationship between incarceration and education spending drops out&mdash;the key point of the table below is simply that inequality&rsquo;s effect on incarceration is robust against the conservative arguments to the effect that inequality is a fair outcome rather than a driver of unfair outcomes.</li>
</ol>


<p><img src="http://justinmurphy.files.wordpress.com/2012/05/screen-shot-2012-06-01-at-2-57-24-pm.png" alt="" /></p>

<p>Below are overlaid impulse-response functions. The first graph displays the predicted effect that some exogenous shock on inequality has on education spending, compared to its effect on the incarceration rate. Moving from left to right across the x-axis charts the decay of the effect over time. Of course, this assumes that our VAR was a fully and correctly specified model, which is unlikely. Nonetheless, as a back of the e-napkin analysis, it&rsquo;s interesting to note that an exogenous shock to inequality has a positive and statistically significant effect on incarceration.</p>

<p><img src="http://justinmurphy.files.wordpress.com/2012/05/irf_inequality_education_prison.png" alt="" /></p>

<p>The second graph shows that an exogenous shock to inequality has a far larger effect on the incarceration rate than an exogenous shock to the crime rate.</p>

<p><img src="http://justinmurphy.files.wordpress.com/2012/05/irf_inequality_crime_prison.png" alt="" /></p>
]]></content>
  </entry>
  
</feed>
